"0","# Calculate gradients (Sobel filters)"
"0","gx <- focal(dem, matrix(c(-1, 0, 1, -2, 0, 2, -1, 0, 1), nrow = 3), fun = sum)"
"0","gy <- focal(dem, matrix(c(1, 2, 1, 0, 0, 0, -1, -2, -1), nrow = 3), fun = sum)"
"0",""
"0","edges = sqrt(gx^2 + gy^2)"
"0","# Apply threshold to gradients to identify significant features"
"0","threshold <- 20 # Adjust threshold as needed"
"0","gx[edges <= threshold] <- NA"
"0","gy[edges <= threshold] <- NA"
"0","plot(shade(slope*pi/180, aspect*pi/180, angle = 10, direction = 270), col = grey(0:100/100), legend = F)"
